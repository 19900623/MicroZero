﻿﻿﻿﻿﻿# API/VOTE 返回定义
> 按ZMQ帧作为返回内容的分隔,为保证路由快速，前两帧为信封（即原始请求的对象标识）

## 1 、帧内容约定
### 1.1、ZeroCenter
- 第一帧：信封帧（原始请求者）
- 第二帧：信封帧（空）
- 第三帧：内容说明帧，如果没有返回内容，此帧不应存在。
- 第四帧：状态帧，格式与是否存在，由第三帧决定
- 五至N帧：内容帧，格式与是否存在，由第三帧决定
### 1.2、ZeroNet
- 第一帧：内容说明帧，如果没有返回内容，此帧不应存在。
- 第二帧：状态帧，格式与是否存在，由第一帧决定
- 三至N帧：内容帧，格式与是否存在，由第一帧决定
## 2、内容说明帧说明
帧长度：后续帧数+3

索引|格式|含义|说明
--|--|--
0 |Byte|内容帧数量|后续帧数必须与内容帧格式严格定义
1 |Byte|状态说明符|标准状态的数字表示（1-255）
2...n |Char|内容帧格式|见内容帧类型说明
n|Char|结束符|总是为0
## 2、信封特殊标识
字节
@ 表示加入API或是Vote工作组 
$ 表示继续等待回复  
! 表示退出API或是Vote工作组

## 3、 结果状态
> 参考Redis状态定义，第一个字符为状态标识，后续为状态文本。

> 例如如成功 返回文本为 +ok ，超时为 -time out

### 3.1、状态标识
字节|说明
--|--
+ | 表示成功状态
- | 表示失败状态


### 3.2、通用状态文本
状态|内容|说明
--|--|--
+ |ok|操作成功
+ |plan|计划执行
- |error|发生错误
- |failed|操作失败
- |no find|找不到站点
- |no support|不支持的操作
- |invalid|参数校验失败
- |time out|超时失败
- |net error|网络错误

## 4、内容说明
> 0 字节为后续帧数量，1字节开始为对应内容帧的数据格式，可通过此说明快速还原数据

字节|说明
--|--
T|文本
B|二进制
J|JSON





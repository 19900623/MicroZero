﻿﻿﻿﻿﻿# API/VOTE 返回定义
> 按ZMQ帧作为返回内容的分隔,为保证路由快速，前两帧为信封（即原始请求的对象标识）

## 1 、帧内容约定
### 1.1、Api、Cmd、Vote
### 1.1.1、ZeroCenter
- 第一帧：信封帧（原始请求者）
- 第二帧：信封帧（空）
- 第三帧：内容说明帧，如果没有返回内容，此帧不应存在。
- 五至N帧：内容帧，格式与是否存在，由第三帧决定
### 1.1.2、ZeroNet
- 第一帧：内容说明帧，如果没有返回内容，此帧不应存在。
- 第二至N帧：内容帧，格式与是否存在，由第一帧决定

### 1.2、Pub

### 1.1.1、ZeroCenter
- 第一帧：信封帧（原始请求者）
- 第二帧：信封帧（空）
- 第三帧：广播标题，因ZMQ发布订阅而引发的不同
- 第四帧：内容说明帧，如果没有返回内容，此帧不应存在。
- 五至N帧：内容帧，格式与是否存在，由第四帧决定
### 1.1.2、ZeroNet
- 第一帧：广播标题，因ZMQ发布订阅而引发的不同
- 第二帧：内容说明帧，如果没有返回内容，此帧不应存在。
- 三至N帧：内容帧，格式与是否存在，由第二帧决定


## 2、内容说明帧
帧长度：后续帧数+3

+ 0 |Byte|内容帧数量|后续帧数必须与内容帧格式严格定义
+ 1 |Byte|状态说明符|通用状态的数字代码（0-255）
+ 2...n-1 |Char|内容帧格式|见内容帧类型说明
+ n|Char|结束符|总是为0

### 2.2.2、 状态帧（类型符号：）

> 参考Redis状态定义，第一个字符（0）为状态标识，后续为状态文本。
‘+’表示成功状态
‘-’表示失败状态
> 例
> 成功:+ok
> 超时:time out

### 2.2.3、通用状态
数字代码|状态|内容|说明
--|--|--|--|--
0|+|ok|操作成功
1|+|plan|计划执行
2|-|error|发生错误
3|-|failed|操作失败
4|-|no find|找不到站点
5|-|no support|不支持的操作
6|-|invalid|参数校验失败
7|-|time out|超时失败
8|-|net error|网络错误



## 4、内容说明
> 0 字节为后续帧数量，1字节开始为对应内容帧的数据格式，可通过此说明快速还原数据

适用场景|字符|说明
--|--|--
All|S|状态文本
All|T|文本
All|B|二进制
All|J|JSON
Pub|S|子标题







define(["jquery","fastclick","Toast","Plugin","apiMain"],function(t,e,o,n,i){function s(){var arguments=0!==arguments.length?arguments[0]:arguments;this.element=arguments.element?arguments.element:"html",this.footer=arguments.footer?arguments.footer:".footer-item",this.offsetTime=arguments.offsetTime?arguments.offsetTime:1e3,this.constructor()}return s.prototype.constructor=function(){return this.ajaxConfig(),this.ajaxExtend(),this.setFontSize(),this.initFastClick(),this.clickFooterItem(),this.exeAjaxRequestDeviceId(),this},s.prototype.setFontSize=function(){var e=this,o=t(window).width()/3.75+"px";return t(e.element).css("fontSize",o),t(window).resize(function(){var o=t(window).width()/3.75+"px";t(e.element).css("fontSize",o)}),this},s.prototype.initFastClick=function(){return e.attach(document.body),this},s.prototype.clickFooterItem=function(){return t(document).on("click",this.footer,function(){var e=t(this).find("a").data("url");window.location.replace(e)}),this},s.prototype.ajaxExtend=function(){var e=this,i=new n;return t(document).ajaxSend(function(t,e,o){i.showLoading();var n=sessionStorage.getItem("AccessToken");e.setRequestHeader("Authorization",n);var s=o.$renderContainer;o.ajaxBox=s,console.log("AJAX_SEND")}).ajaxSuccess(function(t,o,n,s){setTimeout(function(){i.hideLoading(),console.log("AJAX_SUCCESS")},e.offsetTime)}).ajaxError(function(t,n,i){setTimeout(function(){var t=(i.ajaxBox,new o);t.show(t.ERROR,"加载失败"),t=null,console.log("AJAX_ERROR")},e.offsetTime)}).ajaxComplete(function(t,o,n){setTimeout(function(){i.hideLoading(),console.log("AJAX_COMPLETE")},e.offsetTime)}),this},s.prototype.ajaxConfig=function(){return t.ajaxSetup({type:"POST",timeout:2e4,dataType:"JSON",processData:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8"}),this},s.prototype.ajaxRequestDeviceId=function(){return this.$ajax({url:i.getUrl("deviceId"),success:function(t){t=t||{};var e=new o,n="Bearer "+t.data;t.success?(e.show(e.SUCCESS,"加载成功"),sessionStorage.setItem("AccessToken",n)):e.show(e.ERROR,"加载失败"),e=null}}),this},s.prototype.exeAjaxRequestDeviceId=function(){return sessionStorage.getItem("AccessToken")||this.ajaxRequestDeviceId(),this},s.prototype.$ajax=function(e){var o=this;return t.ajax({url:e.url,data:e.data,success:function(t){setTimeout(function(){e.success(t)},o.offsetTime)}}),this},new s});